<!doctype html><html><head lang=en>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge"><title>Hugo | Generate your own site - Romain Lespinasse</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Post about how I build this blog ... like any developer must-do.">
<meta property="og:image" content>
<meta property="og:title" content="Hugo | Generate your own site">
<meta property="og:description" content="Post about how I build this blog ... like any developer must-do.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.romainlespinasse.dev/posts/gohugo/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2019-10-27T10:42:00+02:00">
<meta property="article:modified_time" content="2019-10-27T10:42:00+02:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Hugo | Generate your own site">
<meta name=twitter:description content="Post about how I build this blog ... like any developer must-do.">
<script src=https://www.romainlespinasse.dev/js/feather.min.js></script>
<link href=https://www.romainlespinasse.dev/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet>
<link rel=stylesheet type=text/css media=screen href=https://www.romainlespinasse.dev/css/main.ac08a4c9714baa859217f92f051deb58df2938ec352b506df655005dcaf98cc0.css>
<link id=darkModeStyle rel=stylesheet type=text/css href=https://www.romainlespinasse.dev/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css disabled>
<script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type=text/x-mathjax-config>
		MathJax.Hub.Config({
			tex2jax: {
				inlineMath: [['$','$'], ['\\(','\\)']],
				displayMath: [['$$','$$'], ['\[','\]']],
				processEscapes: true,
				processEnvironments: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
				TeX: { equationNumbers: { autoNumber: "AMS" },
						 extensions: ["AMSmath.js", "AMSsymbols.js"] }
			}
		});
		</script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script>
</head>
<body>
<div class=content><header>
<div class=main>
<a href=https://www.romainlespinasse.dev/>Romain Lespinasse</a>
</div>
<nav>
<a href=/>Home</a>
<a href=/posts>All posts</a>
<a href=/about>About</a>
<a href=/tags>Tags</a>
| <span id=dark-mode-toggle onclick=toggleTheme()></span>
<script src=https://www.romainlespinasse.dev/js/themetoggle.js></script>
</nav>
</header>
<main>
<article>
<div class=title>
<h1 class=title>Hugo | Generate your own site</h1>
<div class=meta>Posted on Oct 27, 2019</div>
</div>
<section class=body>
<p>I brought a domain name <code>romainlespinasse.dev</code>, so naturally I search to build a website, a small one.</p>
<ul>
<li>to give access to some social links about me,</li>
<li>to make available all my posts across blog platforms (Company blog site, Medium, Dev.to).</li>
</ul>
<p>I choose</p>
<ul>
<li>to build a static site with <a href=https://gohugo.io/>Hugo</a></li>
<li>support by Continuous Delivery using <a href=https://github.com/features/actions>Github Actions</a></li>
<li>to deploy it on <a href=https://pages.github.com/>GitHub User site</a>.</li>
</ul>
<h2 id=step-1--build-the-site>Step 1 | Build the site</h2>
<p>After <a href=https://gohugo.io/getting-started/installing/>installing Hugo</a>, I bootstrap a site for <code>romainlespinasse.dev</code> and initialize a git repository :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>hugo new site rlespinasse.github.io
cd rlespinasse.github.io
git init
</code></pre></div><p>To have a good looking site, I choose one of the theme from <a href=https://themes.gohugo.io/>https://themes.gohugo.io/</a>.
The chosen theme is a simple one, adapt for a personal site : <a href=https://github.com/Track3/hermit.git>Hermit</a>.</p>
<p>As documented, I add it as <code>git submodule</code> :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>git submodule add https://github.com/Track3/hermit.git themes/hermit
</code></pre></div><p>Now, I need to configure the site with my own settings.
The setup part is managed by the <code>config.toml</code> file :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=color:#75715e># access url (use to setup links inside the site)</span>
<span style=color:#a6e22e>baseURL</span> = <span style=color:#e6db74>&#34;https://www.romainlespinasse.dev&#34;</span>
<span style=color:#75715e># Title (for the &#39;&lt;title&gt;&#39; html tag)</span>
<span style=color:#a6e22e>title</span> = <span style=color:#e6db74>&#34;Romain Lespinasse&#34;</span>
<span style=color:#75715e># site language</span>
<span style=color:#a6e22e>languageCode</span> = <span style=color:#e6db74>&#34;en-us&#34;</span>
<span style=color:#a6e22e>defaultContentLanguage</span> = <span style=color:#e6db74>&#34;en&#34;</span>
<span style=color:#75715e># theme</span>
<span style=color:#a6e22e>theme</span> = <span style=color:#e6db74>&#34;hermit&#34;</span>
<span style=color:#75715e># folder to serve static files</span>
<span style=color:#75715e># &#39;/static/image.png&#39; will be available at &#39;https://www.romainlespinasse.dev/image.png&#39;</span>
<span style=color:#a6e22e>staticDir</span> = [<span style=color:#e6db74>&#34;static&#34;</span>]

<span style=color:#75715e># additional configuration from hermit theme (see themes/hermit/exampleSite/config.toml)</span>
</code></pre></div><p>I add the <code>hermit</code> additional configuration and made some changes :</p>
<ul>
<li><code>copyright</code> to set the chosen license for this site: <a href=https://opensource.org/licenses/MIT>MIT License</a>,</li>
<li><code>googleAnalytics</code> to have some analytics about my site,</li>
<li>Some social links to Twitter, LinkedIn or GitHub accounts.</li>
</ul>
<p>After configuration, I start to write the first post of my site.
Hugo can serve locally the site with live reloading capabilities :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ hugo serve -D
...
Web Server is available at http://localhost:1313/ <span style=color:#f92672>(</span>bind address 127.0.0.1<span style=color:#f92672>)</span>
Press Ctrl+C to stop
</code></pre></div><p>Hugo can also create post template <code>hugo new posts/gohugo.md</code></p>
<p>A sample from this current blog post :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>---
title: &#34;Hugo | Generate your own site&#34;
date: 2019-10-27T10:42:00+02:00
draft: false
tags:
  <span style=color:#66d9ef>-</span> feedback
  <span style=color:#66d9ef>-</span> hugo
  <span style=color:#66d9ef>-</span> staticsite
  <span style=color:#66d9ef>-</span> github
---

I brought a domain name <span style=color:#e6db74>`romainlespinasse.dev`</span>, so naturally I search to build a website, a small one.
</code></pre></div><p>To build the static site, I just run <code>hugo</code> and setup generated folders as ignored by git :</p>
<p>Content of <code>.gitignore</code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>resources/_gen
public/
</code></pre></div><h2 id=step-2--add-continuous-delivery>Step 2 | Add Continuous Delivery</h2>
<p>Since I&rsquo;m using GitHub for hosting my git repository, I setup</p>
<ul>
<li>a Github action to build and deploy the site on the default branch: <code>sources</code>,</li>
<li>a GitHub action to build the site on every branches and pull-requests in order to validate the content of the static site.</li>
</ul>
<p><a href=https://github.com/peaceiris>peaceiris</a> have created some useful GitHub actions to my usecase :</p>
<ul>
<li>Build a <code>Hugo</code> site with <a href=https://github.com/peaceiris/actions-hugo>peaceiris/actions-hugo</a>,</li>
<li>Push content to a specific branch <a href=https://github.com/peaceiris/actions-gh-pages>peaceiris/actions-gh-pages</a> used to push GitHub pages.</li>
</ul>
<p>In <code>.github/workflows/build.yaml</code> file, the following action will, on any branch except <code>sources</code> branch :</p>
<ul>
<li>checkout the git repository with its submodules,</li>
<li>build the <code>hugo</code> site.</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#ae81ff>build</span>

<span style=color:#f92672>on</span>:
  <span style=color:#f92672>push</span>:
    <span style=color:#f92672>branches-ignore</span>:
    - <span style=color:#ae81ff>sources</span>

<span style=color:#f92672>jobs</span>:
  <span style=color:#f92672>build</span>:
    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-18.04</span>
    <span style=color:#f92672>steps</span>:
    - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@master</span>
      <span style=color:#f92672>with</span>:
        <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>

    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2.2.2</span>
      <span style=color:#f92672>with</span>:
        <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;0.58.3&#39;</span>
        <span style=color:#f92672>extended</span>: <span style=color:#66d9ef>true</span>

    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span><span style=color:#e6db74>        </span>        <span style=color:#ae81ff>hugo --gc --minify</span>
</code></pre></div><p>In <code>.github/workflows/deploy.yaml</code> file, the following action will, on <code>sources</code> branch :</p>
<ul>
<li>checkout the git repository with its submodules,</li>
<li>build the <code>hugo</code> site,</li>
<li>deploy the content of <code>public</code> folder to <code>master</code> branch in order to serve as GitHub pages.</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#ae81ff>deploy</span>

<span style=color:#f92672>on</span>:
  <span style=color:#f92672>push</span>:
    <span style=color:#f92672>branches</span>:
    - <span style=color:#ae81ff>sources</span>

<span style=color:#f92672>jobs</span>:
  <span style=color:#f92672>build-deploy</span>:
    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-18.04</span>
    <span style=color:#f92672>steps</span>:
    - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@master</span>
      <span style=color:#f92672>with</span>:
        <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>

    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2.2.2</span>
      <span style=color:#f92672>with</span>:
        <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;0.58.3&#39;</span>
        <span style=color:#f92672>extended</span>: <span style=color:#66d9ef>true</span>

    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span><span style=color:#e6db74>        </span>        <span style=color:#ae81ff>hugo --gc --minify</span>

    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v2.5.0</span>
      <span style=color:#f92672>env</span>:
        <span style=color:#f92672>ACTIONS_DEPLOY_KEY</span>: <span style=color:#ae81ff>${{ secrets.ACTIONS_DEPLOY_KEY }}</span>
        <span style=color:#f92672>PUBLISH_BRANCH</span>: <span style=color:#ae81ff>master</span>
        <span style=color:#f92672>PUBLISH_DIR</span>: <span style=color:#ae81ff>./public</span>
</code></pre></div><p>To setup <code>secrets.ACTIONS_DEPLOY_KEY</code>, I follow the <a href=https://github.com/peaceiris/actions-gh-pages#1-add-ssh-deploy-key><code>peaceiris/actions-gh-pages</code> guideline</a>.</p>
<h2 id=step-3--configure-github-user-site>Step 3 | Configure Github User Site</h2>
<p>With a site built and push to <code>master</code> branch, I setup the repository <a href=https://help.github.com/en/github/working-with-github-pages>to use GitHub user pages</a> to serve it.</p>
<p>In order to tell my domain <code>romainlespinasse.dev</code> to serve my GitHub pages, I just follow the GitHub guideline <a href=https://help.github.com/en/github/working-with-github-pages/managing-a-custom-domain-for-your-github-pages-site#configuring-an-apex-domain>to configure an APEX domain</a>.
In addition of GitHub pages settings and Domain <code>DNS</code> settings, I need to add a <code>CNAME</code> file to the master branch :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>www.romainlespinasse.dev
</code></pre></div><p>Since the static site is not built by <code>jekyll</code> (the default static site generator), I need to add a <code>.nojekyll</code> file to the <code>master</code> branch.</p>
<p>In <code>.github/workflows/deploy.yaml</code> file, I update the <code>Build</code> step with :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span><span style=color:#e6db74>        hugo --gc --minify
</span><span style=color:#e6db74>        cp CNAME public/
</span><span style=color:#e6db74>        touch public/.nojekyll</span>        
</code></pre></div><p>Now, <a href=https://romainlespinasse.dev>https://romainlespinasse.dev</a> is live.</p>
</section>
<div class=post-tags>
<nav class="nav tags">
<ul class=tags>
<li><a href=/tags/feedback>feedback</a></li>
<li><a href=/tags/hugo>hugo</a></li>
<li><a href=/tags/staticsite>staticsite</a></li>
<li><a href=/tags/github>github</a></li>
</ul>
</nav>
</div>
</article>
</main>
<footer>
<div style=display:flex><a class=soc href=https://github.com/rlespinasse rel=me title=GitHub><i data-feather=github></i></a>
<a class=border></a><a class=soc href=https://www.linkedin.com/in/romain-lespinasse rel=me title=LinkedIn><i data-feather=linkedin></i></a>
<a class=border></a><a class=soc href=https://bsky.app/profile/rlespinasse.bsky.social rel=me title=Bluesky><i data-feather=cloud></i></a>
<a class=border></a></div>
<div class=footer-info>
2024 Â© Romain Lespinasse | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a>
</div>
</footer>
<script>feather.replace()</script></div>
</body>
</html>