<!doctype html><html lang=en-gb dir=ltr><head><meta charset=utf-8><meta http-equiv=content-language content="en-gb"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>Homebrew : Optimisez la gestion de paquets sur macOS &#183; Romain Lespinasse</title>
<meta name=title content="Homebrew : Optimisez la gestion de paquets sur macOS &#183; Romain Lespinasse"><meta name=description content="D√©couvrez homebrew pour vous facilitez la vie sous macOS dans la gestion de vos installations de packages."><meta name=keywords content="homebrew,macos,french,"><link rel=canonical href=https://www.romainlespinasse.dev/posts/homebrew/><link type=text/css rel=stylesheet href=/css/main.bundle.min.236cf0f5f0f0ad36f55502ffc2262891bc65e1670c91eb6370180ea007270f8a5322f443ae1ba428db833f5be863de1a135384773f65086d8a9b5175c2af3776.css integrity="sha512-I2zw9fDwrTb1VQL/wiYokbxl4WcMketjcBgOoAcnD4pTIvRDrhukKNuDP1voY94aE1OEdz9lCG2Km1F1wq83dg=="><script defer type=text/javascript src=/js/theme.min.b12ffe233a345d2a545ca355b5aa71c906bbebbee2ea801f46de9e7af2b59da08cc4ffe002b2f302ce00f00eddca05abd8f71c16335f949d96e42eb5971c0235.js integrity="sha512-sS/+Izo0XSpUXKNVtapxyQa7677i6oAfRt6eevK1naCMxP/gArLzAs4A8A7dygWr2PccFjNflJ2W5C61lxwCNQ=="></script><script defer type=text/javascript src=/js/codecopy.min.6319d0ad3eae498a0591b4ec1d52cc0156f5c3cb95390089d7d0ac7fe6dfb183161c14f935d25b5ad896840e2a9d6a23f555a7976954d0a263c24a11272aa747.js integrity="sha512-YxnQrT6uSYoFkbTsHVLMAVb1w8uVOQCJ19Csf+bfsYMWHBT5NdJbWtiWhA4qnWoj9VWnl2lU0KJjwkoRJyqnRw=="></script><script defer type=text/javascript src=/js/search.min.bb866b924569dd33a507ff4631eae853f6b6902fe0dbfe5e8aad50e1ccd528db3a01aaf098948dd4516d6bbd2dab8c6716b4b31809eb28ad8ce47d4801a0f0c3.js integrity="sha512-u4ZrkkVp3TOlB/9GMeroU/a2kC/g2/5eiq1Q4czVKNs6AarwmJSN1FFta70tq4xnFrSzGAnrKK2M5H1IAaDwww=="></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://www.romainlespinasse.dev/posts/homebrew/"><meta property="og:site_name" content="Romain Lespinasse"><meta property="og:title" content="Homebrew : Optimisez la gestion de paquets sur macOS"><meta property="og:description" content="D√©couvrez homebrew pour vous facilitez la vie sous macOS dans la gestion de vos installations de packages."><meta property="og:locale" content="en_gb"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-02-28T10:42:00+01:00"><meta property="article:modified_time" content="2017-02-28T10:42:00+01:00"><meta property="article:tag" content="Homebrew"><meta property="article:tag" content="Macos"><meta property="article:tag" content="French"><meta property="og:image" content="https://www.romainlespinasse.dev/img/posts/homebrew/featured.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.romainlespinasse.dev/img/posts/homebrew/featured.jpg"><meta name=twitter:title content="Homebrew : Optimisez la gestion de paquets sur macOS"><meta name=twitter:description content="D√©couvrez homebrew pour vous facilitez la vie sous macOS dans la gestion de vos installations de packages."><script defer type=text/javascript src=/lib/fuse/fuse.min.1ab2783fdcab6ba75fb69e4ed1e68a14a4b8721d45627d7147f5421d020c24ed4b36a70a8639009001131d8a04f3515f87706308931603f0194983f9db58f114.js integrity="sha512-GrJ4P9yra6dftp5O0eaKFKS4ch1FYn1xR/VCHQIMJO1LNqcKhjkAkAETHYoE81Ffh3BjCJMWA/AZSYP521jxFA=="></script><link rel=preload href=https://www.romainlespinasse.dev/fonts/Ubuntu-Regular.woff2 as=font type=font/woff2 crossorigin></head><body><script>const siteTheme="auto";let savedTheme=localStorage.getItem("theme")||siteTheme;savedTheme=="auto"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(savedTheme="dark"),savedTheme==="dark"&&(document.body.classList.add("dark"),localStorage.setItem("theme","dark"))</script><div class=content><header><div class=header-cntr><a class=title href=/><span>Romain Lespinasse</span></a><div class=menu><nav id=main-menu class=mm-normal><ul><li><button id=mob-x-icon class=menu-btn arial-label=x-icon><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></button></li><li><a href=/posts/ aria-label=posts>Posts</li></a><li><a href=/tags/ aria-label=tags>Tags</li></a><li><a href=/about/ aria-label=about>About</li></a></ul></nav><div class=side-menu><button id=search-open class=menu-btn aria-label="Search button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></button><div id=search-container data-url=https://www.romainlespinasse.dev/><div class=search><div class=panel><form><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
<input type=search id=search-query placeholder=Search tabindex=0 autocomplete=off>
<button id=search-close title="Cancel (ESC)"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></button></form></div><ul id=search-results></ul></div></div><button id=theme-switcher class=menu-btn aria-label="Theme switcher"><div id=moon><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></div><div id=sun><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></div></button></div><button id=mob-hb-icon class=menu-btn aria-label="Hamburger icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></button></div><script>(function(){document.addEventListener("DOMContentLoaded",function(){const s=document.getElementById("mob-hb-icon"),e=document.getElementById("mob-x-icon"),t=document.getElementById("main-menu"),n=document.body;s.addEventListener("click",function(){t.classList.replace("mm-normal","mm-mobile-open"),e.style.display="block",n.style.overflow="hidden"}),e.addEventListener("click",function(){t.classList.replace("mm-mobile-open","mm-normal"),e.style.display="none",n.style.overflow=""})})})()</script><script>(function(){var t,n,e=document.getElementById("main-menu");if(!e)return;t=window.location.pathname,n=e.querySelectorAll("a"),n.forEach(function(e){e.getAttribute("href")===t&&e.classList.add("active")})})()</script></div></header><main><h1 class=pg-title>Homebrew : Optimisez la gestion de paquets sur macOS</h1><div class=meta><p><span class=meta-icon><svg fill="currentcolor" width="800" height="800" viewBox="0 0 24 24"><path d="M19 4H17V3a1 1 0 00-2 0V4H9V3A1 1 0 007 3V4H5A3 3 0 002 7V19a3 3 0 003 3H19a3 3 0 003-3V7A3 3 0 0019 4zm1 15a1 1 0 01-1 1H5a1 1 0 01-1-1V12H20zm0-9H4V7A1 1 0 015 6H7V7A1 1 0 009 7V6h6V7a1 1 0 002 0V6h2a1 1 0 011 1z"/></svg>
</span>Posted on <time datetime=2017-02-28T10:42:00+01:00>Feb 28, 2017</time>
<span class=meta-icon><svg width="800" height="800" viewBox="0 0 24 24" fill="currentcolor"><path d="M23 12c0 6.0751-4.9249 11-11 11C5.92487 23 1 18.0751 1 12 1 5.92487 5.92487 1 12 1c6.0751.0 11 4.92487 11 11zM3.00683 12c0 4.9668 4.02638 8.9932 8.99317 8.9932 4.9668.0 8.9932-4.0264 8.9932-8.9932.0-4.96679-4.0264-8.99317-8.9932-8.99317-4.96679.0-8.99317 4.02638-8.99317 8.99317z" fill="currentcolor"/><path d="M12 5C11.4477 5 11 5.44771 11 6v6.4667S11 12.7274 11.1267 12.9235C11.2115 13.0898 11.3437 13.2343 11.5174 13.3346l4.6198 2.6673C16.6155 16.278 17.2271 16.1141 17.5032 15.6358 17.7793 15.1575 17.6155 14.5459 17.1372 14.2698L13 11.8812V6C13 5.44772 12.5523 5 12 5z" fill="currentcolor"/></svg>
</span>13 mins</p><p><span class=meta-icon><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M48 32H197.5c17 0 33.2 6.74 45.2 18.75l176 175.95c25 25 25 65.6.0 90.6L285.3 450.7c-25 25-65.6 25-90.6.0L18.75 274.7C6.743 262.7.0 246.5.0 229.5V80C0 53.49 21.49 32 48 32zm64 144c17.7.0 32-14.3 32-32 0-17.7-14.3-32-32-32-17.67.0-32 14.3-32 32s14.33 32 32 32z"/></svg>
</span><a class=tag href=/tags/homebrew/>Homebrew</a>
<a class=tag href=/tags/macos/>Macos</a>
<a class=tag href=/tags/french/>French</a></p></div><p>Votre soci√©t√© ou votre client vient de vous confier un macbook pour travailler,
il ne vous reste plus qu&rsquo;√† installer tout un ensemble de programmes pour commencer.</p><p>Sous linux, vous auriez un gestionnaire de formulas
qui ferait bien l&rsquo;affaire pour aller plus vite.
Mais sous macOS, pas de apt-get, pas de yum,
vous voil√† parti pour installer tout cela √† la main.</p><p>Pas de crainte, des gestionnaires de formulas existent aussi pour macOS comme <a href=http://brew.sh/ target=_blank><strong>Homebrew</strong></a>
(ou <a href=https://www.macports.org target=_blank>MacPorts</a>
)</p><p>Installer homebrew en une ligne de commande</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>/usr/bin/ruby -e <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><blockquote><p><strong>Homebrew</strong> est un gestionnaire bas√© sur des <strong>formulas</strong> d&rsquo;installation de formula (en <strong>Ruby</strong>)
et utilise des <strong>repositories git</strong> comme conteneurs de ces <strong>formulas</strong>.</p></blockquote><p>Apr√®s une simple installation, vous avez √† votre disposition une nouvelle commande,
petit tour du proprietaire :</p><p>La commande <strong>&ldquo;brew&rdquo;</strong> vous montre les commandes les plus courantes.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew
</span></span><span style=display:flex><span>Example usage:
</span></span><span style=display:flex><span>  brew search <span style=color:#f92672>[</span>TEXT|/REGEX/<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  brew <span style=color:#f92672>(</span>info|home|options<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>FORMULA...<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  brew install FORMULA...
</span></span><span style=display:flex><span>  brew update
</span></span><span style=display:flex><span>  brew upgrade <span style=color:#f92672>[</span>FORMULA...<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  brew uninstall FORMULA...
</span></span><span style=display:flex><span>  brew list <span style=color:#f92672>[</span>FORMULA...<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Troubleshooting:
</span></span><span style=display:flex><span>  brew config
</span></span><span style=display:flex><span>  brew doctor
</span></span><span style=display:flex><span>  brew install -vd FORMULA
</span></span></code></pre></div><p>Dans ces commandes, on retourne notamment celles pour g√©rer le <strong>cycle de vie de votre formula</strong></p><p>brew install FORMULA&mldr;
brew update
brew upgrade [FORMULA&mldr;]
brew uninstall FORMULA&mldr;</p><p>TIP: En executant <code>brew doctor</code>, vous v√©rifiez que votre installation de Homebrew est correcte.
La commande vous indiquera les diff√©rents probl√®mes de votre installation (s&rsquo;il y en a).</p><p>Maintenant que homebrew est install√©, vous souhaitez installer vos premiers formulas.</p><p>Vous commencez par vos besoins pour le projet.
Comme il s&rsquo;agit d&rsquo;un projet en <strong>Java</strong> sous <strong>Gradle</strong> avec des outils √©crits en <strong>Go</strong>
et que l&rsquo;ensemble est g√©r√© par Ansible, vous avez votre liste de formulas:</p><ul><li>Ansible</li><li>Java</li><li>Go</li><li>Gradle</li></ul><p>Vous installez vos formulas hors java</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew install ansible go gradle
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ ansible --version
</span></span><span style=display:flex><span>ansible 2.2.0.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ go version
</span></span><span style=display:flex><span>go version go1.7.4 darwin/amd64
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ gradle -v
</span></span><span style=display:flex><span>Gradle 3.3
</span></span></code></pre></div><p>Vous installer java √† part, car vous souhaitez installer java 8.</p><p>Vous rechercher donc les <strong>formulas</strong> nomm√©es <strong>java</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew search java
</span></span><span style=display:flex><span>app-engine-java
</span></span><span style=display:flex><span>google-java-format
</span></span><span style=display:flex><span>javarepl
</span></span><span style=display:flex><span>jslint4java
</span></span><span style=display:flex><span>libreadline-java
</span></span><span style=display:flex><span>homebrew/emacs/javaimp
</span></span><span style=display:flex><span>Caskroom/cask/eclipse-java
</span></span><span style=display:flex><span>Caskroom/cask/java
</span></span><span style=display:flex><span>Caskroom/cask/netbeans-java-ee
</span></span><span style=display:flex><span>Caskroom/cask/netbeans-java-se
</span></span><span style=display:flex><span>Caskroom/cask/yourkit-java-profiler
</span></span><span style=display:flex><span>Caskroom/versions/charles-applejava
</span></span><span style=display:flex><span>Caskroom/versions/charles-beta-applejava
</span></span><span style=display:flex><span>Caskroom/versions/java-beta
</span></span><span style=display:flex><span>Caskroom/versions/java6
</span></span><span style=display:flex><span>Caskroom/versions/java7
</span></span><span style=display:flex><span>Caskroom/versions/java9-beta
</span></span></code></pre></div><p><strong>Aie</strong>, il n&rsquo;y a pas de <strong>formula</strong> nomm√©e <strong>java</strong> ou <strong>java8</strong>.
Par contre la recherche vous propose les formulas contenant le mot <strong>java</strong>.
Parmis les formulas, ceux avec un chemin (<strong>a/b/formula</strong>) sont des formulas contenues dans des <strong>taps</strong>.</p><p><strong>Mais qu&rsquo;est-ce qu&rsquo;un tap</strong>, il s&rsquo;agit d&rsquo;un autre <strong>repository git</strong>
contenant des formulas d√©di√©es ou des nouvelles commandes.</p><blockquote><p>On installe un <strong>tap</strong> via la commande <code>brew tap utilisateur/nom_tap</code>.</p><p>Avec le tap <strong>utilisateur/nom_tap</strong>, brew installera le <strong>repository git</strong> associ√© √† l&rsquo;url <a href=https://github.com/utilisateur/homebrew-nom_tap target=_blank>https://github.com/utilisateur/homebrew-nom_tap</a>
.</p><p>Pour les autres possibilit√©s, utilisez <code>brew tap -h</code>.</p></blockquote><p>TIP: <code>brew install a/b/formula</code> installera le <strong>tap</strong> et la formula en m√™me temps.</p><p>Parmis les <strong>taps</strong> officiels, on peut trouver :</p><ul><li><a href=https://github.com/Homebrew/homebrew-core target=_blank><strong>homebrew/core</strong></a>
- <strong>Core formulae for the Homebrew formula manager</strong> <strong>(the default tap)</strong></li><li><a href=https://github.com/Homebrew/homebrew-science target=_blank><strong>homebrew/science</strong></a>
- <strong>Scientific formulae for the Homebrew formula manager</strong></li><li><a href=https://github.com/Homebrew/homebrew-games target=_blank><strong>homebrew/games</strong></a>
- <strong>Games formulae for the Homebrew formula manager</strong></li><li><a href=https://github.com/Homebrew/homebrew-completions target=_blank><strong>homebrew/completions</strong></a>
- <strong>Shell completion formulae for the Homebrew formula manager</strong></li><li><a href=https://github.com/Homebrew/homebrew-command-not-found target=_blank><strong>homebrew/command-not-found</strong></a>
- <strong>Ubuntu‚Äôs command-not-found equivalent for Homebrew on OSX</strong></li><li><a href=https://github.com/Homebrew/homebrew-services target=_blank><strong>homebrew/services</strong></a>
- <strong>Starts Homebrew formulae&rsquo;s plists with launchctl</strong></li></ul><p>Tous ces <strong>taps</strong> sont g√©r√©s par la communaut√© Homebrew,
mais certains <strong>taps</strong> officiels ne sont pas de Homebrew mais sont bien int√©gr√©s comme <strong>Caskroom/cask</strong>.</p><p>Les <strong>formulas</strong> de <strong>Caskroom/cask</strong> sont d√©di√©s aux installations d&rsquo;applications macOS</p><p>Maintenant, vous installez <strong>java 8</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew install Caskroom/cask/java
</span></span><span style=display:flex><span><span style=color:#f92672>==</span>&gt; brew cask install Caskroom/cask/java
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ java -version
</span></span><span style=display:flex><span>java version <span style=color:#e6db74>&#34;1.8.0_112&#34;</span>
</span></span><span style=display:flex><span>Java<span style=color:#f92672>(</span>TM<span style=color:#f92672>)</span> SE Runtime Environment <span style=color:#f92672>(</span>build 1.8.0_112-b16<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Java HotSpot<span style=color:#f92672>(</span>TM<span style=color:#f92672>)</span> 64-Bit Server VM <span style=color:#f92672>(</span>build 25.112-b16, mixed mode<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>Lors du lancement de la commande, brew a transf√©r√© votre demande √† <code>brew cask install</code> pour son installation.</p><p>Avec <strong>Cask</strong>, vous pouvez, en plus de vos formulas, installer votre navigateur, votre √©diteur de code,&mldr;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>brew cask install google-chrome intellij-idea docker slack
</span></span></code></pre></div><p>TIP: <code>brew tap caskroom/drivers</code> vous permet d&rsquo;installer les drivers pour macOS.
Les fonts s&rsquo;installent elles via <code>brew tap caskroom/fonts</code>.</p><p>Certains formulas sont g√©r√©es comme des <strong>services</strong> via macOS <strong>launchd</strong>.
Pour cela, brew propose, via <a href=https://github.com/Homebrew/homebrew-services target=_blank><strong>homebrew/services</strong></a>
,
la commande <strong>brew services</strong> pour faciliter leurs utilisations.</p><p>Pour votre projet, vous avez aussi besoin d&rsquo;une base de donn√©es <strong>MySQL</strong>.</p><p>Vous installez <strong>MySQL</strong> qui poss√®de un service sous macOS</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew install mysql
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ brew services list
</span></span><span style=display:flex><span>Name           Status  User Plist
</span></span><span style=display:flex><span>mysql          stopped
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ brew services start mysql
</span></span><span style=display:flex><span><span style=color:#f92672>==</span>&gt; Successfully started <span style=color:#e6db74>`</span>mysql<span style=color:#e6db74>`</span> <span style=color:#f92672>(</span>label: homebrew.mxcl.mysql<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ brew services list
</span></span><span style=display:flex><span>Name           Status  User            Plist
</span></span><span style=display:flex><span>mysql          started &lt;your_username&gt; ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist
</span></span></code></pre></div><p>Votre installation de poste est termin√©e. Vous pouvez commencer √† travailler.</p><p>Au bout d&rsquo;un certain temps, vous souhaiteriez mettre √† jour vos formulas.</p><p>La proc√©dure de mise √† jour se fait en deux commandes <strong>update</strong> + <strong>upgrade</strong>.
Avec ces 2 commandes, vous pouvez aussi utiliser deux autres commandes <strong>outdated</strong> et <strong>cleanup</strong> utiles suivant vos besoins.</p><ul><li><strong>update</strong> met √† jour les <strong>repositories git</strong> des <strong>taps</strong>,</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew update
</span></span><span style=display:flex><span>Updated <span style=color:#ae81ff>2</span> taps <span style=color:#f92672>(</span>caskroom/cask, homebrew/core<span style=color:#f92672>)</span>.
</span></span><span style=display:flex><span><span style=color:#f92672>==</span>&gt; New Formulae
</span></span><span style=display:flex><span><span style=color:#f92672>==</span>&gt; Updated Formulae
</span></span><span style=display:flex><span>go ‚úî
</span></span></code></pre></div><ul><li><strong>upgrade</strong> met √† jour les formulas,</li></ul><pre tabindex=0><code>$ brew upgrade
==&gt; Upgrading 1 outdated formula, with result:
go 1.7.4_1
==&gt; Upgrading go
==&gt; Downloading https://homebrew.bintray.com/bottles/go-1.7.4_1.sierra.bottle.tar.gz
...
üç∫  /usr/local/Cellar/go/1.7.4_1: 6,438 files, 250.7M
</code></pre><ul><li><strong>outdated</strong> liste les formulas qui doivent √™tre mis √† jour,</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew outdated
</span></span><span style=display:flex><span>go <span style=color:#f92672>(</span>1.6<span style=color:#f92672>)</span> &lt; 1.7.4_1
</span></span></code></pre></div><ul><li><strong>cleanup</strong> supprime les anciennes versions des formulas (car Homebrew les garde ind√©finiment).</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew cleanup
</span></span><span style=display:flex><span>Removing: /usr/local/Cellar/go/1.6... <span style=color:#f92672>(</span>6,438 files, 250.7M<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>==</span>&gt; This operation has freed approximately 250.7M of disk space.
</span></span></code></pre></div><blockquote><p>D√©finissez un alias <strong>bubu</strong> (d√©j√† disponible par d√©faut dans <strong>zsh</strong>) pour <code>brew update && brew outdated && brew upgrade && brew cleanup</code>, et ainsi en une commande g√®rer vos formulas plus simplement.</p></blockquote><p>Vous venez d&rsquo;apprendre qu&rsquo;un des m√©canismes par d√©faut de Homebrew
est de conserver toutes les versions install√©es de vos formulas.
Ceci dans le but de vous permettre de facilement switcher entre ces versions.</p><blockquote><p><strong>brew install &lt;formula></strong> ne permet d&rsquo;installer que la version courante du formula, jamais une ancienne version.</p></blockquote><p>Par exemple comment passer √† une version go 1.6 puis revenir sur une version go 1.7</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew switch go 1.6
</span></span><span style=display:flex><span>Cleaning /usr/local/Cellar/go/1.6
</span></span><span style=display:flex><span>Cleaning /usr/local/Cellar/go/1.7.4_1
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span> links created <span style=color:#66d9ef>for</span> /usr/local/Cellar/go/1.6
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ brew switch go 1.7.4_1
</span></span><span style=display:flex><span>Cleaning /usr/local/Cellar/go/1.6
</span></span><span style=display:flex><span>Cleaning /usr/local/Cellar/go/1.7.4_1
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span> links created <span style=color:#66d9ef>for</span> /usr/local/Cellar/go/1.7.4_1
</span></span></code></pre></div><p>TIP: Le tap <strong>homebrew/versions</strong> vous permet d&rsquo;acc√®der √† d&rsquo;anciennes versions.</p><p>Sur le projet, votre voisin de bureau commence sa premi√®re journ√©e
et vous demande de lui passer votre liste de formulas et d&rsquo;applications
pour faire lui aussi l&rsquo;installation rapidement.</p><p>Vous appliquez la m√©thode KISS</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>brew list &gt; brew-formulas.txt
</span></span><span style=display:flex><span>brew cask list &gt; brew-applications.txt
</span></span></code></pre></div><p>Et votre voisin devrait se d√©brouiller avec les deux fichers bruts que vous venez de lui envoyer par email.
C&rsquo;est KISS mais seulement pour vous.</p><p>Mais l√† encore, Homebrew a pens√© √† faciliter ce genre d&rsquo;actions via <strong>brew bundle</strong>.</p><p>Vous cr√©ez un Brewfile de votre poste via <code>brew bundle dump</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew bundle dump
</span></span><span style=display:flex><span>$ cat Brewfile
</span></span><span style=display:flex><span>tap <span style=color:#e6db74>&#39;caskroom/cask&#39;</span>
</span></span><span style=display:flex><span>tap <span style=color:#e6db74>&#39;homebrew/bundle&#39;</span>
</span></span><span style=display:flex><span>tap <span style=color:#e6db74>&#39;homebrew/core&#39;</span>
</span></span><span style=display:flex><span>tap <span style=color:#e6db74>&#39;homebrew/services&#39;</span>
</span></span><span style=display:flex><span>brew <span style=color:#e6db74>&#39;ansible&#39;</span>
</span></span><span style=display:flex><span>brew <span style=color:#e6db74>&#39;go&#39;</span>
</span></span><span style=display:flex><span>brew <span style=color:#e6db74>&#39;mysql&#39;</span>, restart_service: true
</span></span><span style=display:flex><span>brew <span style=color:#e6db74>&#39;gradle&#39;</span>
</span></span><span style=display:flex><span>cask <span style=color:#e6db74>&#39;docker&#39;</span>
</span></span><span style=display:flex><span>cask <span style=color:#e6db74>&#39;google-chrome&#39;</span>
</span></span><span style=display:flex><span>cask <span style=color:#e6db74>&#39;intellij-idea&#39;</span>
</span></span><span style=display:flex><span>cask <span style=color:#e6db74>&#39;java&#39;</span>
</span></span><span style=display:flex><span>cask <span style=color:#e6db74>&#39;slack&#39;</span>
</span></span></code></pre></div><p>Un fichier <strong>Brewfile</strong> commence par lister les <strong>taps</strong> install√©s, puis les formulas install√©s, ainsi que les applications.
Il garde m√™me en m√©moire les status des services (ici, <strong>mysql</strong> est lanc√©).</p><p>Vous transmettez le fichier <strong>Brewfile</strong> √† votre voisin et il n&rsquo;a plus qu&rsquo;√† l&rsquo;utiliser.</p><p>Votre voisin de bureau installe ce Brewfile sur son poste</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew bundle
</span></span><span style=display:flex><span>Tapping caskroom/cask
</span></span><span style=display:flex><span>Tapping homebrew/bundle
</span></span><span style=display:flex><span>Using homebrew/core
</span></span><span style=display:flex><span>Tapping homebrew/services
</span></span><span style=display:flex><span>Installing ansible
</span></span><span style=display:flex><span>Installing go
</span></span><span style=display:flex><span>Installing gradle
</span></span><span style=display:flex><span>Installing mysql
</span></span><span style=display:flex><span>Installing docker
</span></span><span style=display:flex><span>Installing google-chrome
</span></span><span style=display:flex><span>Installing intellij-idea
</span></span><span style=display:flex><span>Installing java
</span></span><span style=display:flex><span>Installing slack
</span></span></code></pre></div><p>TIP: Par d√©faut, <strong>brew bundle</strong> utilise le fichier <strong>Brewfile</strong> depuis le dossier courant.
L&rsquo;option <code>--file=path</code> permet de d√©finir un autre chemin vers le fichier <strong>Brewfile</strong>.
L&rsquo;option <code>--global</code> ira lire un fichier <strong>.Brefile</strong> depuis votre <strong>$HOME</strong>.</p><p>Apr√®s la d√©couverte de <strong>brew bundle</strong>,
vous vous dites autant partager la liste des formulas n√©cessaire pour un projet sp√©cifiquement.</p><p>Pour cela, il suffit de cr√©er un fichier <strong>Brewfile</strong> dans vos sources de projet et de le commiter.
Comme cela un nouveau d√©veloppeur n&rsquo;a qu&rsquo;√† lancer <code>brew bundle</code> pour √™tre s√ªr d&rsquo;avoir le n√©cessaire pour travailler sur le projet.</p><p>Cela tombe bien, vous avez un nouveau projet en Java sous Gradle √† faire et qui servira comme outil aux autres d√©veloppeurs.</p><p>Vous cr√©ez un <strong>Brewfile</strong> dans votre nouveau projet avec Java et Gradle</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ cd project-tool
</span></span><span style=display:flex><span>$ vim Brewfile
</span></span><span style=display:flex><span>$ cat Brewfile
</span></span><span style=display:flex><span>tap <span style=color:#e6db74>&#39;caskroom/cask&#39;</span>
</span></span><span style=display:flex><span>brew <span style=color:#e6db74>&#39;gradle&#39;</span>
</span></span><span style=display:flex><span>cask <span style=color:#e6db74>&#39;java&#39;</span>
</span></span></code></pre></div><p>Apr√®s que ce nouveau projet soit pr√™t, il est temps que les autres d√©veloppeurs l&rsquo;utilisent.
Pour faciliter sa distribution, vous l&rsquo;avez publi√© dans votre repository manager de votre client (ex. <strong>Nexus</strong>).</p><p>Un de vos coll√®gues teste l&rsquo;installation du nouvel outil</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tool_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://nexus.client.tld/content/repositories/releases/tld/client/project/tool/1.0.0/tool-1.0.0-distribution.zip&#39;</span>
</span></span><span style=display:flex><span>$ wget $tool_url
</span></span><span style=display:flex><span>$ unzip tool-1.0.0-distribution.zip
</span></span><span style=display:flex><span>$ tree
</span></span><span style=display:flex><span>tool-1.0.0-distribution
</span></span><span style=display:flex><span>‚îú‚îÄ‚îÄ bin
</span></span><span style=display:flex><span>‚îÇ   ‚îî‚îÄ‚îÄ tool
</span></span><span style=display:flex><span>‚îî‚îÄ‚îÄ lib
</span></span><span style=display:flex><span>    ‚îî‚îÄ‚îÄ tool-1.0.0.jar
</span></span><span style=display:flex><span>$ chmod u+x tool-1.0.0-distribution/bin/tool
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>&#34;export PATH=\&#34;</span><span style=color:#66d9ef>$(</span>pwd<span style=color:#66d9ef>)</span><span style=color:#e6db74>/tool-1.0.0-distribution/bin:\$PATH\&#34;&#34;</span> &gt;&gt; ~/.bashrc
</span></span><span style=display:flex><span>$ . ~/.bashrc
</span></span><span style=display:flex><span>$ tool --version
</span></span><span style=display:flex><span>1.0.0
</span></span></code></pre></div><p>Mais la proc√©dure d&rsquo;installation n&rsquo;est pas aussi simple que d&rsquo;√©crire <code>brew install project-tool</code>.
Pourquoi ne pas cr√©er une <strong>formula</strong> aussi pour ce projet?</p><p>Avant de la cr√©er, vous vous demandez comment la sauvegarder?
Homebrew vous propose d√©j√† des <strong>taps</strong> pour avoir plus de <strong>formulas</strong> disponibles.</p><p>Vous pouvez cr√©er un <strong>tap</strong> priv√© qui est un simple repository git.
Par d√©faut, un <strong>tap</strong> ajout√© via <code>brew tap utilisateur/nom_tap</code> corresponds √† l&rsquo;url <a href=https://github.com/utilisateur/homebrew-nom_tap.git target=_blank>https://github.com/utilisateur/homebrew-nom_tap.git</a></p><p>Si vous voulez le stocker ailleurs, l&rsquo;ajout se fait par <code>brew tap utilisateur/nom_tap git@git.client.tld:utilisateur/homebrew-nom_tap.git</code>.</p><p>NOTE: Dans un <strong>Brewfile</strong>, ajouter la ligne <code>tap 'utilisateur/nom_tap', 'git@git.client.tld:utilisateur/homebrew-nom_tap.git'</code> pour d√©clarer ce tap.</p><p>Une fois que vous avez cr√©√© et ajout√© ce <strong>tap</strong> priv√©, vous pouvez passer √† la cr√©ation de la <strong>formula</strong> via la commande <code>create</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew create $tool_url --set-name project-tool --set-version 1.0.0 --tap utilisateur/nom_tap
</span></span><span style=display:flex><span><span style=color:#f92672>==</span>&gt; Downloading https://nexus.client.tld/content/repositories/releases/tld/client/project/tool/1.0.0/tool-1.0.0-distribution.zip
</span></span><span style=display:flex><span><span style=color:#75715e>######################################################################## 100,0%</span>
</span></span><span style=display:flex><span>Please <span style=color:#e6db74>`</span>brew audit --new-formula project-tool<span style=color:#e6db74>`</span> before submitting, thanks.
</span></span><span style=display:flex><span>Editing /usr/local/Homebrew/Library/Taps/utilisateur/nom_tap/project-tool.rb
</span></span></code></pre></div><p>Suite √† la cr√©ation de votre <strong>formula</strong>, homebrew ouvre automatiquement le fichier associ√©.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#75715e># Documentation: http://docs.brew.sh/Formula-Cookbook.html # &lt;1&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#                http://www.rubydoc.info/github/Homebrew/brew/master/Formula</span>
</span></span><span style=display:flex><span><span style=color:#75715e># PLEASE REMOVE ALL GENERATED COMMENTS BEFORE SUBMITTING YOUR PULL REQUEST!</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProjectTool</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>Formula</span>
</span></span><span style=display:flex><span>  desc <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>  homepage <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>  url <span style=color:#e6db74>&#34;https://nexus.client.tld/content/repositories/releases/tld/client/project/tool/1.0.0/tool-1.0.0-distribution.zip&#34;</span> <span style=color:#75715e># &lt;2&gt;</span>
</span></span><span style=display:flex><span>  version <span style=color:#e6db74>&#34;1.0.0&#34;</span>
</span></span><span style=display:flex><span>  sha256 <span style=color:#e6db74>&#34;12259beb7c5a0954f2193f581a0c11ec63ff4a573ffeb35efba4b6389d36fad7&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># depends_on &#34;cmake&#34; =&gt; :build # &lt;3&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>install</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># ENV.deparallelize  # if your formula fails when building in parallel</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Remove unrecognized options if warned by configure</span>
</span></span><span style=display:flex><span>    system <span style=color:#e6db74>&#34;./configure&#34;</span>, <span style=color:#e6db74>&#34;--disable-debug&#34;</span>,
</span></span><span style=display:flex><span>                          <span style=color:#e6db74>&#34;--disable-dependency-tracking&#34;</span>,
</span></span><span style=display:flex><span>                          <span style=color:#e6db74>&#34;--disable-silent-rules&#34;</span>,
</span></span><span style=display:flex><span>                          <span style=color:#e6db74>&#34;--prefix=</span><span style=color:#e6db74>#{</span>prefix<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># system &#34;cmake&#34;, &#34;.&#34;, *std_cmake_args</span>
</span></span><span style=display:flex><span>    system <span style=color:#e6db74>&#34;make&#34;</span>, <span style=color:#e6db74>&#34;install&#34;</span> <span style=color:#75715e># if this fails, try separate make/make install steps</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  test <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># `test do` will create, run in and delete a temporary directory.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># This test will fail and we won&#39;t accept that! It&#39;s enough to just replace</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># &#34;false&#34; with the main program this formula installs, but it&#39;d be nice if you</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># were more thorough. Run the test with `brew test project-tool`. Options passed</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># to `brew install` such as `--HEAD` also need to be provided to `brew test`.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The installed folder is not in the path, so use the entire path to any</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># executables being tested: `system &#34;#{bin}/program&#34;, &#34;do&#34;, &#34;something&#34;`.</span>
</span></span><span style=display:flex><span>    system <span style=color:#e6db74>&#34;false&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><blockquote><ol><li>La formula vous fournie le lien vers la documentation pour finir sa cr√©ation,</li><li>La formula contient d√©j√† les informations donn√©es (ex. url, version) ou g√©n√©r√©es (ex. sha256),</li><li>Le reste du code est un template par d√©faut.</li></ol></blockquote><p>Vous pouvez <strong>auditer</strong> la formula pour savoir par o√π commencer</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew audit --new-formula project-tool
</span></span><span style=display:flex><span>utilisateur/nom_tap/project-tool:
</span></span><span style=display:flex><span>  * Formula should have a desc <span style=color:#f92672>(</span>Description<span style=color:#f92672>)</span>.
</span></span><span style=display:flex><span>  * The homepage should start with http or https <span style=color:#f92672>(</span>URL is <span style=color:#f92672>)</span>.
</span></span><span style=display:flex><span>  * The homepage  is not reachable <span style=color:#f92672>(</span>HTTP status code 000<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  * Please remove default template comments
</span></span><span style=display:flex><span>  * Please remove default template comments
</span></span><span style=display:flex><span>  * Commented-out dep <span style=color:#e6db74>&#34;cmake&#34;</span> <span style=color:#f92672>=</span>&gt; :build
</span></span><span style=display:flex><span>  * Please remove default template comments
</span></span><span style=display:flex><span>  * Please remove default template comments
</span></span><span style=display:flex><span>  * Commented cmake call found
</span></span><span style=display:flex><span>  * Please remove default template comments
</span></span><span style=display:flex><span>Error: <span style=color:#ae81ff>10</span> problems in <span style=color:#ae81ff>1</span> formula
</span></span></code></pre></div><p>Vous devez donc d√©finir la <strong>description</strong> et la <strong>homepage</strong> de la formula (ex. l&rsquo;url du repository git).
Et comme il ne s&rsquo;agit pas d&rsquo;un <strong>build cmake</strong>, vous pouvez enlever les commentaires ainsi que le code li√© √† <strong>cmake</strong>.</p><p>Vous faites les premiers changements afin que l&rsquo;audit passe</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProjectTool</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>Formula</span>
</span></span><span style=display:flex><span>  desc <span style=color:#e6db74>&#34;Installer l&#39;outil &#39;tool&#39; pour le projet&#34;</span>
</span></span><span style=display:flex><span>  homepage <span style=color:#e6db74>&#34;https://git.client.tld/project/tool&#34;</span>
</span></span><span style=display:flex><span>  url <span style=color:#e6db74>&#34;https://nexus.client.tld/content/repositories/releases/tld/client/project/tool/1.0.0/tool-1.0.0-distribution.zip&#34;</span>
</span></span><span style=display:flex><span>  version <span style=color:#e6db74>&#34;1.0.0&#34;</span>
</span></span><span style=display:flex><span>  sha256 <span style=color:#e6db74>&#34;12259beb7c5a0954f2193f581a0c11ec63ff4a573ffeb35efba4b6389d36fad7&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>install</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Il ne reste plus qu&#39;√† faire la proc√©dure d&#39;installation</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  test <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Et tester la formula</span>
</span></span><span style=display:flex><span>    system <span style=color:#e6db74>&#34;false&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Puis vous auditez et tentez d&rsquo;installer la formula</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew audit --new-formula project-tool
</span></span><span style=display:flex><span>$ brew install project-tool
</span></span><span style=display:flex><span><span style=color:#f92672>==</span>&gt; Installing project-tool from utilisateur/nom_tap
</span></span><span style=display:flex><span><span style=color:#f92672>==</span>&gt; Downloading https://nexus.client.tld/content/repositories/releases/tld/client/project/tool/1.0.0/tool-1.0.0-distribution.zip
</span></span><span style=display:flex><span>Already downloaded: /Users/utilisateur/Library/Caches/Homebrew/project-tool-1.0.0.zip
</span></span><span style=display:flex><span>Error: Empty installation
</span></span></code></pre></div><p>L&rsquo;audit est bien pass√©, mais l&rsquo;installation de la formula vous indique que la proc√©dure d&rsquo;installation reste √† faire.</p><p>La proc√©dure d&rsquo;installation manuelle vous sert de guide dans l&rsquo;√©criture de votre formula</p><ol><li>T√©l√©charger le zip,</li><li>D√©compresser le zip,</li><li>Aller dans le dossier d√©compress√©,</li><li>Rendre √©xecutable le script <strong>bin/tool</strong>,</li><li>Ajouter le dossier <strong>bin</strong> au <strong>PATH</strong>,</li><li>Tester que <code>tool --version</code> donne bien le num√©ro de version de l&rsquo;outil.</li></ol><p>Homebrew t√©l√©chargera et d√©compressera le zip du projet automatiquement (via <strong>url</strong> et <strong>sha256</strong>) r√©alisant les √©tapes 1 et 2.</p><p>Pour l&rsquo;√©tape 3, la fonction <strong>install</strong> s&rsquo;√©xecute dans le dossier d√©compress√©.
Par contre, ce dossier est temporaire, vous devez demander √† garder les dossiers <strong>bin</strong> et <strong>lib</strong> dans <strong>libexec</strong>.</p><p>Une <strong>formula</strong> propose plusieurs r√©pertoires pour stocker des fichiers utiles.
Le dossier <strong>libexec</strong> sert √† stocker des fichiers uniquement n√©cessaire √† la <strong>formula</strong>.
Via <code>libexec.install</code>, vous pouvez demander qu&rsquo;un dossier y soit stock√©.</p><p>Afin de r√©aliser l&rsquo;√©tape 4, vous devez demander √† lier le script <strong>libexec/bin/tool</strong> au PATH via <code>bin.install_symlink</code>.
Cette action r√©alise √©galement l&rsquo;√©tape 5 car <code>bin.install_symlink</code> g√©re aussi les permissions.</p><p>Le test de l&rsquo;√©tape 6 se fera par <code>brew test</code>, ceci une fois la fonction <strong>test</strong> remplie dans la <strong>formula</strong>.
Ce test peut simplement √™tre que l&rsquo;√©xecution de <code>tool --version</code> fonctionne.</p><p>De plus, une formula peut d√©finir des pr√©-requis comme par exemple que Java 8 (ou plus) soit install√©.
Via <code>depends_on :java => "1.8+"</code> vous d√©finissez un tel pr√©requis.</p><p>Vous ajoutez les diff√©rentes √©tapes dans la formula</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProjectTool</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>Formula</span>
</span></span><span style=display:flex><span>  desc <span style=color:#e6db74>&#34;Installer l&#39;outil &#39;tool&#39; pour le projet&#34;</span>
</span></span><span style=display:flex><span>  homepage <span style=color:#e6db74>&#34;https://git.client.tld/project/tool&#34;</span>
</span></span><span style=display:flex><span>  url <span style=color:#e6db74>&#34;https://nexus.client.tld/content/repositories/releases/tld/client/project/tool/1.0.0/tool-1.0.0-distribution.zip&#34;</span>
</span></span><span style=display:flex><span>  version <span style=color:#e6db74>&#34;1.0.0&#34;</span>
</span></span><span style=display:flex><span>  sha256 <span style=color:#e6db74>&#34;12259beb7c5a0954f2193f581a0c11ec63ff4a573ffeb35efba4b6389d36fad7&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  depends_on <span style=color:#e6db74>:java</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;1.8+&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>install</span>
</span></span><span style=display:flex><span>    libexec<span style=color:#f92672>.</span>install <span style=color:#e6db74>%w[bin lib]</span>
</span></span><span style=display:flex><span>    bin<span style=color:#f92672>.</span>install_symlink <span style=color:#66d9ef>Dir</span><span style=color:#f92672>[</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>libexec<span style=color:#e6db74>}</span><span style=color:#e6db74>/bin/*&#34;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  test <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    system <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>bin<span style=color:#e6db74>}</span><span style=color:#e6db74>/tool&#34;</span>, <span style=color:#e6db74>&#34;--version&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Afin de correctement tester cette <strong>formula</strong>, vous devez</p><ul><li>l&rsquo;auditer avec <code>brew audit</code>,</li><li>l&rsquo;installer avec <code>brew install</code>,</li><li>la tester avec <code>brew test</code>.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew audit --new-formula project-tool
</span></span><span style=display:flex><span>$ brew install project-tool
</span></span><span style=display:flex><span><span style=color:#f92672>==</span>&gt; Installing project-tool from utilisateur/nom_tap
</span></span><span style=display:flex><span><span style=color:#f92672>==</span>&gt; Downloading https://nexus.client.tld/content/repositories/releases/tld/client/project/tool/1.0.0/tool-1.0.0-distribution.zip
</span></span><span style=display:flex><span>Already downloaded: /Users/utilisateur/Library/Caches/Homebrew/project-tool-1.0.0.zip
</span></span><span style=display:flex><span>üç∫  /usr/local/Cellar/project-tool/1.0.0: <span style=color:#ae81ff>4</span> files, 100K, built in <span style=color:#ae81ff>0</span> seconds
</span></span><span style=display:flex><span> $ brew test project-tool
</span></span><span style=display:flex><span>Testing utilisateur/nom_tap/project-tool
</span></span><span style=display:flex><span><span style=color:#f92672>==</span>&gt; Using the sandbox
</span></span><span style=display:flex><span><span style=color:#f92672>==</span>&gt; /usr/local/Cellar/project-tool/1.0.0/bin/tool --version
</span></span></code></pre></div><blockquote><p>Vous pouvez aussi v√©rifier le style de la formula via <code>brew style</code>.</p></blockquote><p>Comme tout s&rsquo;est bien pass√©, vous souhaitez maintenant la <strong>commiter</strong> pour que vos coll√®gues puissent l&rsquo;installer plus simplement.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cd <span style=color:#66d9ef>$(</span>brew --repo utilisateur/nom_tap<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>git add Formula/project-tool.rb
</span></span><span style=display:flex><span>git commit
</span></span></code></pre></div><p>Votre coll√®gue appr√©cie la nouvelle proc√©dure</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>brew tap utilisateur/nom_tap git@git.client.tld:utilisateur/homebrew-nom_tap.git
</span></span><span style=display:flex><span>brew install project-tool
</span></span></code></pre></div><p>NOTE: le syst√®me de <strong>formula</strong> permet √©galement de g√©rer l&rsquo;installation depuis les sources (<a href=https://github.com/Homebrew/brew/blob/master/docs/Formula-Cookbook.md#head target=_blank><strong>&ndash;HEAD</strong></a>
)
ou les versions b√™ta (<a href=https://github.com/Homebrew/brew/blob/master/docs/Formula-Cookbook.md#devel target=_blank><strong>&ndash;devel</strong></a>
).
La documentation des formulas vous permettera d&rsquo;approfondir vos formulas (<a href=http://docs.brew.sh/Formula-Cookbook.html target=_blank>http://docs.brew.sh/Formula-Cookbook.html</a>
).</p><p>Maintenant que vous savez cr√©er des <strong>formulas</strong> pour votre client,
vous pouvez aussi cr√©er des formulas ou les maintenir sur les <strong>taps</strong> officiels.</p><p>Pour contribuer, la formula dans les taps officiels (comme <strong>homebrew-core</strong>) doit respecter <a href=https://github.com/Homebrew/brew/blob/master/docs/Acceptable-Formulae.md target=_blank>certaines conditions pour √™tre acceptable</a>
.</p><p>Le projet install√© par la formula doit √™tre</p><ul><li>open-source,</li><li>stable, maintenu, connu, et utilis√©,</li><li>installable depuis ces sources.</li></ul><p>Une fois la formula cr√©√©e ou modifi√©e, vous pouvez cr√©er une pull-request vers le project <strong>homebrew-core</strong>.
Votre pull-request sera automatiquement analys√©e et valid√©e par <a href=https://bot.brew.sh/ target=_blank>bot.brew.sh</a>
.</p><p>Dans le but d&rsquo;aider les mainteneurs du projet, <a href=https://bot.brew.sh/ target=_blank>bot.brew.sh</a>
traite toutes pull-requests
en testant la formula sur les trois derni√®res versions support√©es de macOS (<strong>yosemite, el capitan, et sierra</strong>).</p><p>Concernant votre projet <strong>tool</strong>, il ne vous reste plus qu&rsquo;√† le rendre open-source
et proposer votre <strong>formula</strong> sur <strong>homebrew-core</strong> quand le projet sera plus connu.</p><p>En attendant ce jour, n&rsquo;hesitez pas √† contribuer sur les formulas existantes et rejoindre les 6200 contibuteurs de <strong>homebrew-core</strong>.</p><p>Cet article a √©t√© publi√© en premier sur <a href=https://sfeir.com target=_blank>lemag.sfeir.com</a>
.</p><nav class=pagenav><a class=prev href=/posts/antora/><span class=direction>¬´ Prev</span><br><span>Antora 1.0 : Transformez votre wiki en site de documentation performant</span></a><div></div></nav></main><footer><div class=copyright>¬© 2024 Romain Lespinasse</div></footer></div></body></html>